#!/usr/bin/env python3

from argparse import ArgumentParser
import datetime
import logging

import pyglet

from psaux.app import ParticleSimulator
from psaux.config import PsauxConfig


def psaux(debug: bool = None):
    if PsauxConfig.debug:
        log_folder = "logs"
        log_filename = '{}/{}.log'.format(log_folder, datetime.datetime.now().strftime("%Y-%b-%d %H:%M"))
        logging.basicConfig(
            filename=log_filename,
            level=logging.DEBUG,
            format="%(created)f - %(levelname)s - %(message)s"
        )
    else:
        logging.basicConfig(level=logging.WARN)

    app = ParticleSimulator()
    app.set_minimum_size(640, 480)
    pyglet.app.run()


def main():
    parser = ArgumentParser()
    parser.add_argument("--debug")
    args = parser.parse_args()
    psaux(**vars(args))


if __name__ == "__main__":
    main()

